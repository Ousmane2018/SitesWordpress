jQuery(document).ready(function(o){if(0===o(".xoo-el-container").length)return!1;var e=o(".xoo-el-notice");o(".xoo-el-modal").on("click",function(e){o.each(e.target.classList,function(e,t){if("xoo-el-modal"==t||"xoo-el-close"==t)return o("body , .xoo-el-container").removeClass("xoo-el-popup-active"),r(),!1})});var t=function(o,t){var r="object"==typeof o?"<span>"+o.join("<br>")+"</span>":"<span>"+o+"</span>",s="error"==t?"xoo-el-notice-error":"xoo-el-notice-success";e.html(r).addClass(s).addClass("xoo-el-active")},r=function(){e.attr("class","xoo-el-notice").html(""),o(".xoo-el-lostpw-success").remove(),o("form.xoo-el-action-form").show()},s={init:function(){this.switch_form_to=this.switch_form_to.bind(this),this.submit_form=this.submit_form.bind(this),o(document).on("click",".xoo-el-login-tgr , .xoo-el-reg-tgr , .xoo-el-lostpw-tgr",this.switch_form_to),o(document).on("submit",".xoo-el-action-form",this.submit_form)},switch_form_to:function(e){var t,s=o(e.currentTarget);!s||s.is(".xoo-el-login-tgr")?t="xoo-el-section-login":s.is(".xoo-el-reg-tgr")?t="xoo-el-section-register":s.is(".xoo-el-lostpw-tgr")&&(t="xoo-el-section-lostpw"),o(".xoo-el-section").removeClass("xoo-el-active"),o("."+t).addClass("xoo-el-active"),o("body , .xoo-el-container").addClass("xoo-el-popup-active"),r()},submit_form:function(e){e.preventDefault(),r();var s=o(e.currentTarget),n=s.find("input[name=_xoo_el_form]").val();if(n){var l=i.validate(n);0===l.length?this.perform_action(s):t(l,"error")}},perform_action:function(e){var r=e.find(".xoo-el-action-btn"),s=r.text();r.html('<i class="fa fa-circle-o-notch spinner fa-spin" aria-hidden="true"></i>').addClass("xoo-el-processing");var i=e.serialize()+"&action=xoo_el_form_action";o.ajax({url:xoo_el_localize.adminurl,type:"POST",data:i,success:function(o){r.removeClass("xoo-el-processing").html(s),1==o.error?t(o.notice,"error"):r.hasClass("xoo-el-lostpw-btn")?(r.parents(".xoo-el-action-form").hide(),r.parents(".xoo-el-fields").append(o.notice)):(t(o.notice,"success"),setTimeout(function(){window.location=o.redirect},300))}})}},i={errors:[],validate:function(o){if("function"==typeof this[o])return this[o](),this.getErrors();console.log(o+" is not a valid input form type.")},setError:function(o){this.errors.push(o)},getErrors:function(){var o=this.errors;return this.errors=[],o},checkLength:function(o,e){return e>o.val().trim().length},login:function(){var e=o("#xoo-el-username"),t=o("#xoo-el-password");(this.checkLength(e,1)||this.checkLength(t,1))&&this.setError(xoo_el_localize.strings.errors.login.empty)},register:function(){var e=o("#xoo-el-reg-email"),t=o("#xoo-el-reg-password"),r=o("#xoo-el-reg-confirm-password"),s=o("#xoo-el-reg-fname"),i=o("#xoo-el-reg-lname"),n=o("#xoo-el-terms"),l=xoo_el_localize.strings.errors.register;!1===/\S+@\S+\.\S+/.test(e.val())&&this.setError(l.valid_email),this.checkLength(t,6)?this.setError(l.min_password):t.val()!==r.val()&&this.setError(l.match_password),0!==s.length&&(this.checkLength(s,3)&&this.setError(l.min_fname),this.checkLength(i,3)&&this.setError(l.min_lname)),n.is(":checked")||this.errors.length||this.setError(l.check_terms)},lostPassword:function(){var e=o("#xoo-el-lostpw-email");this.checkLength(e,1)&&this.setError(xoo_el_localize.strings.errors.register.valid_email)}};s.init()});